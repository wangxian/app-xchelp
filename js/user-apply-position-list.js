define(function(require,exports,module){var _=require("underscore");var Backbone=require("backbone");var store=require("store");var MyApplyPositionModel=Backbone.Model.extend({});var MyApplyPositionCollection=Backbone.Collection.extend({model:MyApplyPositionModel,setPage:function(uid){this.url="/job/getMyApplyPosition/"+uid;return this},initialize:function(){var userinfo=store.get("userinfo");this.setPage(userinfo.user_id)}});var MyApplyPosition=new MyApplyPositionCollection;window.MyApplyPosition=MyApplyPosition;var MyApplyDef=Backbone.View.extend({el:"#record",events:{"tap #apply-position-list li":"showDetail"},initialize:function(){$.ui.showMask("正在加载职位申请信息列表...");MyApplyPosition.on("reset",this.renderMyApply,this);var userinfo=store.get("userinfo");this.uid=userinfo.user_id;this.pull()},pull:function(){MyApplyPosition.setPage(this.uid).fetch({success:function(){$.ui.hideMask()},error:function(){$.ui.hideMask();$.ui.popup({title:"错误信息",message:"服务器异常, 或许数据解析错误，请稍候重试！",doneText:"确认",doneCallback:function(){},cancelText:"取消"})}})},renderMyApply:function(list){if(list.length===0||list.length<11){$("#my-publish .load-more").hide()}var _data=list.models[0].attributes.body.data;var _html="";_.each(_data,function(v,k){_html+='<li data-id="'+v["position_id"]+'"><a href="#record-detail">'+"<strong>"+v["position_title"]+"</strong>"+"<br/>"+v["position_descriptions"]+"<br/>"+"<span>"+v["date_time"]+"</span></a></li> "});if(_html.length<1)_html='<p class="system-tip"><strong>您尚未申请过任何职位！</strong><br/>多申请些职位，您就可可以更多接到面试邀请了！</p> ';this.$el.find("#apply-position-list").html(_html)},loadMore:function(){this.pull()},showDetail:function(e){var _e=$(e.currentTarget);var _id=_e.attr("data-id");require.async("./user-one-position",function(mod){mod.showArticle(_id)})}});new MyApplyDef});