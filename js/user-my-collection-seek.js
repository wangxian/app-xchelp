define(function(require,exports,module){var _=require("underscore");var Backbone=require("backbone");var store=require("store");var MySeekhelpListModel=Backbone.Model.extend({});var MySeekhelpListCollection=Backbone.Collection.extend({model:MySeekhelpListModel,setPage:function(page,uid){this.url="/user/getMyCollectSeekhelp?uid="+uid+"&pageid="+page;return this},initialize:function(){var userinfo=store.get("userinfo");this.setPage(1,userinfo.user_id)}});var MySeekhelpList=new MySeekhelpListCollection;window.MySeekhelp=MySeekhelpList;var MySeekhelpViewDef=Backbone.View.extend({el:"#my-collection-help",events:{"tap #my-help .load-more":"loadMore","tap #seek-help-main li":"showDetail","touchstart #seek-help-main li":"touchstart","touchend #seek-help-main li":"touchcancle","touchcancle #seek-help-main li":"touchcancle"},homeMyCollListTemplate:_.template($("#tmpl-tech-items").html()),touchstart:function(e){$(e.currentTarget).addClass("touching")},touchcancle:function(e){$(e.currentTarget).removeClass("touching")},initialize:function(){$.ui.showMask("正在加载求助内容收藏信息列表...");MySeekhelp.on("reset",this.renderMySeekhelp,this);this.page=1;var userinfo=store.get("userinfo");this.uid=userinfo.user_id;this.pull()},pull:function(){MySeekhelp.setPage(this.page++,this.uid).fetch({success:function(){$.ui.hideMask()},error:function(){$.ui.hideMask();$.ui.popup({title:"错误信息",message:"服务器异常, 或许数据解析错误，请稍候重试！",doneText:"确认",doneCallback:function(){},cancelText:"取消"})}})},renderMySeekhelp:function(list){if(list.length<11){$("#my-help .load-more").hide()}var _data=list.toJSON()[0].body.data;if(_data==""){var _html='<h5 class="no-data">您暂无收藏求助信息！</h5>'}else{var _html=this.homeMyCollListTemplate({data:_data})}$("#seek-help-main ul").append(_html)},loadMore:function(){this.pull()},showDetail:function(e){var _e=$(e.currentTarget);var _id=_e.attr("data-id");require.async("./technical-detail",function(mod){mod.showArticle(_id)})}});new MySeekhelpViewDef});